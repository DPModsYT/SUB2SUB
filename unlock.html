<!DOCTYPE html>
<html>
<head>
  <title>Unlock Content</title>
</head>
<body>
  <h2>Subscribe to Unlock</h2>
  <div id="instructions">Loading...</div>
  <button onclick="unlock()">I Subscribed</button>

  <script>
    const url = new URL(window.location.href);
    const target = url.searchParams.get("target");
    const channel = url.searchParams.get("channel");
    const video = url.searchParams.get("video");

    if (!target || !channel) {
      document.getElementById("instructions").innerHTML = "Invalid unlock link.";
    } else {
      let html = `
        <p>1. Subscribe to the channel: <a href="${decodeURIComponent(channel)}" target="_blank">${decodeURIComponent(channel)}</a></p>
      `;
      if (video) {
        html += `<p>2. Like the video: <a href="${decodeURIComponent(video)}" target="_blank">${decodeURIComponent(video)}</a></p>`;
      }
      html += `<p>Then click the button below to unlock your content.</p>`;
      document.getElementById("instructions").innerHTML = html;
    }

    function unlock() {
      if (target) {
        window.location.href = decodeURIComponent(target);
      }
    }
  </script>
</body>
</html>
